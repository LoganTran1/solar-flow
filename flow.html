<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SolarFlow - Discover Your Solar Savings</title>
    <style>
        /* ============================================
           MAIN NAVIGATION
           ============================================ */
        .main-nav {
            display: none;
        }

        .nav-close {
            display: none;
        }

        .nav-restore {
            display: none;
        }

        .main-nav a {
            color: #4CAF50;
            text-decoration: none;
            margin: 0 20px;
            padding: 8px 16px;
            border-radius: 25px;
            background: rgba(76, 175, 80, 0.1);
            transition: all 0.3s ease;
            font-weight: 500;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .main-nav a:hover {
            background: rgba(76, 175, 80, 0.2);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.2);
        }

        .main-nav a.current {
            background: #4CAF50;
            color: white;
            font-weight: 600;
            border-color: #4CAF50;
        }

        @media (max-width: 768px) {
            .main-nav {
                padding: 10px 5px;
                font-size: 12px;
            }
            
            .main-nav a {
                margin: 0 8px;
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        .container {
            margin-top: 0;
        }
        /* ============================================ */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            max-width: 100%;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 768px) {
            .container {
                margin: 20px auto;
                border-radius: 12px;
                min-height: calc(100vh - 40px);
            }
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Header with Logo */
        .header {
            background: white;
            padding: 15px 30px;
            border-bottom: 1px solid #e8ecf0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-radius: 12px 12px 0 0;
            position: relative;
        }

        .back-btn {
            position: absolute;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            background: none;
            border: none;
            width: 45px;
            height: 45px;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--dark-blue, #1a365d);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            line-height: 1;
            padding: 0;
            font-family: Arial, sans-serif;
            outline: none;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-left: 60px; /* Space for back button */
        }

        .back-btn:hover {
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
            transform: translateY(-50%) scale(1.1);
        }

        .back-btn:focus {
            outline: none;
            background: none !important;
        }

        .back-btn:active {
            background: none !important;
        }

        .logo-icon {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            font-size: 1rem;
        }

        /* Enhanced Progress Section */
        .progress-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 30px;
            color: white;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-section.show {
            display: flex;
        }

        .progress-bar-container {
            flex: 1;
            margin-right: 25px;
            position: relative;
            z-index: 2;
        }

        .progress-bar {
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            overflow: visible;
            backdrop-filter: blur(10px);
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff8c00, #ffd700);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShine 2s infinite;
        }

        .progress-percentage {
            position: absolute;
            top: 50%;
            transform: translateY(-50%) translateX(-50%);
            font-weight: 600;
            color: white;
            font-size: 0.65rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.4);
            z-index: 10;
            background: linear-gradient(90deg, #ff8c00, #ffd700);
            padding: 2px 5px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: left 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            white-space: nowrap;
            min-width: 26px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .progress-percentage::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @keyframes checkPulse {
            0% { 
                transform: scale(0.8);
                opacity: 0;
            }
            50% { 
                transform: scale(1.1);
            }
            100% { 
                transform: scale(1);
                opacity: 1;
            }
        }
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .progress-text {
            display: none; /* Hide old progress text */
        }

        .quotes-available {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 6px;
            position: relative;
            z-index: 2;
        }
        }

        .step {
            display: none;
            padding: 60px 40px;
            text-align: center;
            animation: slideIn 0.3s ease;
            background: white;
        }

        .step.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* All steps have consistent white background */
        .step {
            display: none;
            padding: 40px 40px;
            text-align: center;
            animation: slideIn 0.3s ease;
            background: white;
        }

        .step-content {
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2rem;
            font-weight: 700;
        }

        h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
            font-weight: 600;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1rem;
            line-height: 1.5;
        }

        .highlight {
            color: #4CAF50;
            font-weight: 600;
        }

        .question-text {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 25px;
            text-align: center;
        }

        .input-label {
            display: block;
            text-align: left;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 0.9rem;
        }

        .contact-form {
            max-width: 500px;
            margin: 0 auto;
            text-align: left;
        }

        .form-input-full {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e8ecf0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
            background: white;
            color: #666;
        }

        .form-input-full:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .form-input-full::placeholder {
            color: #aaa;
            font-style: italic;
        }

        .button-group {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: center;
            margin-top: 40px;
        }

        .btn-secondary {
            background: white;
            color: #666;
            border: 2px solid #e8ecf0;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-secondary:hover {
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 0;
            transition: all 0.3s;
            min-width: 120px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
            min-width: 160px;
        }

        .form-input {
            width: 100%;
            max-width: 300px;
            padding: 15px 20px;
            border: 2px solid #e8ecf0;
            border-radius: 8px;
            font-size: 1.1rem;
            text-align: center;
            transition: border-color 0.3s;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
            min-width: 120px;
            height: 48px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .next-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 40px;
            transition: all 0.3s;
            opacity: 1;
            pointer-events: auto;
            min-width: 120px;
        }

        .next-btn.enabled {
            opacity: 1;
            pointer-events: auto;
        }

        .next-btn.enabled:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .nav-buttons {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-top: 35px;
        }

        .nav-btn-prev {
            background: white;
            color: #666;
            border: 2px solid #e8ecf0;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
        }

        .nav-btn-prev:hover {
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .nav-btn-next {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
        }

        .nav-btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .btn-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            box-sizing: border-box;
        }

        .btn-option {
            background: white;
            color: #333;
            border: 2px solid #e8ecf0;
            padding: 20px 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            min-height: 100px;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .btn-option:hover {
            border-color: #4CAF50;
            background: #f8fff8;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.15);
        }

        .btn-option.selected {
            border-color: #4CAF50;
            background: #f8fff8;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.25);
        }

        .option-icon {
            font-size: 2rem;
        }

        .option-text {
            font-weight: 600;
            color: #333;
            font-size: 0.85rem;
            line-height: 1.2;
        }

        /* Special grid for 2-option pages (homeowner/renter) */
        .btn-grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .btn-grid-2 .btn-option {
            min-height: 120px;
            padding: 30px 20px;
        }

        .btn-grid-2 .option-icon {
            font-size: 2.5rem;
        }

        .btn-grid-2 .option-text {
            font-size: 1rem;
        }

        .hero-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .satellite-view {
            width: 100%;
            height: 200px;
            background: #f0f0f0;
            border-radius: 12px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ccc;
            font-size: 1.1rem;
            color: #666;
            background-image: url('./satellite-image-flow.png');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .satellite-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
        }

        /* Thank You Page Styles */
        .thank-you {
            text-align: center;
            padding: 60px 40px;
            max-width: 700px;
            margin: 0 auto;
        }

        .thank-you-title {
            color: #2c3e50;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 30px;
            line-height: 1.3;
        }

        .call-notice {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            text-align: left;
        }

        .phone-icon {
            color: #4CAF50;
            font-size: 1.5rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .call-notice-text {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .whats-next {
            text-align: left;
            margin: 40px 0;
        }

        .whats-next h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .next-steps-text {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .no-obligations {
            font-weight: 600;
            color: #333;
        }

        /* Footer */
        .footer {
            background: linear-gradient(135deg, #4a6db8, #5a7bc8);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            border-radius: 0 0 12px 12px;
            margin-top: auto;
        }

        .footer-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            font-size: 1rem;
            font-weight: 700;
        }

        .footer-logo-icon {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 6px;
            font-size: 0.8rem;
        }

        .copyright {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.8rem;
        }

        .footer-links {
            display: flex;
            gap: 20px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: white;
        }

        /* Testimonial Carousel */
        .testimonials-section {
            background: #f8f9fa;
            padding: 30px 30px;
            border-top: 1px solid #e8ecf0;
        }

        .testimonials-carousel {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .testimonials-track {
            display: flex;
            transition: transform 0.5s ease;
        }

        .testimonial-card {
            min-width: 220px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 0 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .stars {
            color: #ffd700;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .company-logo {
            background: #f0f0f0;
            border-radius: 3px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.65rem;
            font-weight: 600;
            color: #666;
            padding: 6px 12px;
            min-width: fit-content;
            white-space: nowrap;
        }

        .testimonial-text {
            font-size: 0.8rem;
            line-height: 1.4;
            color: #555;
            margin-bottom: 12px;
            flex-grow: 1;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .testimonial-author {
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
            font-size: 0.8rem;
        }

        .testimonial-location {
            font-size: 0.7rem;
            color: #888;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: #666;
            transition: all 0.3s;
            z-index: 10;
        }

        .carousel-nav:hover {
            background: #4CAF50;
            color: white;
        }

        .carousel-prev {
            left: 10px;
        }

        .carousel-next {
            right: 10px;
        }

        /* Disqualification Overlay */
        .disqualification-overlay {
            position: fixed;
            top: -10px; /* Extend beyond viewport */
            left: -10px; /* Extend beyond viewport */
            width: calc(100vw + 20px); /* Add extra width */
            height: calc(100vh + 20px); /* Add extra height */
            background: rgba(0, 0, 0, 0.5); /* Lighter opacity: 0.8 → 0.5 */
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            /* Additional coverage for iframe scaling */
            min-width: calc(100vw + 20px);
            min-height: calc(100vh + 20px);
            max-width: none;
            max-height: none;
        }

        .disqualification-overlay.show {
            display: flex;
        }

        /* When modal is active, darken the entire body as backup */
        body.modal-active {
            background: rgba(0, 0, 0, 0.5) !important; /* Lighter backup layer */
        }

        body.modal-active::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5); /* Lighter pseudo-element */
            z-index: 9998;
            pointer-events: none;
        }

        /* Enhanced coverage for iframe context (flow overview) */
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        .disqualification-modal {
            background: white;
            border-radius: 20px;
            max-width: 650px;
            width: 90%;
            height: auto;
            max-height: 80vh;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease-out;
            display: flex;
            flex-direction: column;
            padding-bottom: 0; /* Remove bottom padding */
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 20px 25px 12px;
            border-bottom: 1px solid #e2e8f0;
            position: relative;
            flex-shrink: 0;
        }

        .modal-content {
            padding: 15px 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #f0f0f0;
            color: #333;
        }

        .modal-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            color: #718096;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .modal-content {
            padding: 20px 30px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .alternative-offers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            max-width: 100%;
        }

        .offer-card {
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .offer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(76, 175, 80, 0.05), transparent);
            transition: left 0.5s ease;
        }

        .offer-card:hover::before {
            left: 100%;
        }

        .offer-card:hover {
            border-color: #4CAF50;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .offer-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .offer-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            box-shadow: 0 6px 15px rgba(102, 126, 234, 0.3);
        }

        .offer-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0;
            text-align: center;
        }

        .offer-description {
            color: #718096;
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: center;
            font-size: 0.95rem;
        }

        .offer-features {
            list-style: none;
            margin: 0;
            padding: 0;
            text-align: left;
        }

        .offer-features li {
            display: flex;
            align-items: center;
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .offer-features li::before {
            content: "✓";
            color: #4CAF50;
            font-weight: bold;
            margin-right: 10px;
            font-size: 1rem;
        }

        .offer-card {
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 18px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-align: center;
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 280px;
        }

        .learn-more-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 6px 16px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: auto;
            width: 100%;
            height: 32px;
        }

        .learn-more-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .modal-footer {
            padding: 15px 25px 20px;
            text-align: center;
            flex-shrink: 0;
            display: flex;
            flex-direction: row;
            gap: 10px;
            justify-content: center;
            align-items: center;
            position: relative;
            bottom: -70px; /* Position below the modal */
        }

        .modal-footer-text {
            color: #718096;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .modal-continue-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            flex: 1;
            max-width: 200px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .modal-continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .modal-close-btn {
            background: white;
            color: #666;
            border: 2px solid #e2e8f0;
            padding: 12px 30px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            flex: 1;
            max-width: 200px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .modal-close-btn:hover {
            border-color: #4CAF50;
            color: #4CAF50;
            transform: translateY(-2px);
        }

        /* Responsive Modal Design */
        @media (max-width: 768px) {
            .disqualification-overlay {
                align-items: center; /* Center vertically */
                padding-top: 0; /* Remove top padding */
            }
            
            .disqualification-modal {
                width: 92%;
                margin: 15px auto;
                max-height: 90vh;
                position: relative;
                top: 0; /* Reset to center */
                transform: translateY(0); /* Reset transform */
            }
            
            .modal-header {
                padding: 15px 50px 8px 15px; /* Added 50px right padding to avoid close button overlap */
            }
            
            .modal-close {
                top: 12px;
                right: 12px;
                width: 32px;
                height: 32px;
                font-size: 1.3rem;
            }
            
            .modal-content {
                padding: 10px 15px;
            }
            
            .modal-footer {
                padding: 8px 15px 12px;
                flex-direction: column;
                bottom: -65px; /* Position below the modal on mobile */
                width: 100%;
            }
            
            .offer-card {
                padding: 15px 12px;
                min-height: 240px;
            }
            
            .alternative-offers {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .offer-icon {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .offer-title {
                font-size: 1rem;
            }
            
            .offer-description {
                font-size: 0.8rem;
            }
            
            .offer-features li {
                font-size: 0.75rem;
                margin-bottom: 4px;
            }
            
            .modal-continue-btn,
            .modal-close-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
                margin: 5px;
                display: block;
                width: 85%;
                max-width: 300px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            }
        }

        @media (max-width: 768px) {
            .testimonial-card {
                min-width: 250px;
            }
            
            .carousel-nav {
                display: none;
            }
        }

        @media (max-width: 767px) {
            .container {
                margin: 0;
                border-radius: 0;
                width: 100%;
                max-width: 100%;
                min-width: 100%;
                overflow-x: hidden;
            }
            
            .step {
                padding: 30px 15px;
                width: 100%;
                box-sizing: border-box;
                overflow-x: hidden;
            }
            
            #step1.hero-step {
                padding: 30px 20px;
                min-height: auto;
            }
            
            .hero-container {
                grid-template-columns: 1fr;
                gap: 30px;
                text-align: center;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            #step1 .hero-quote-form {
                padding: 20px;
                max-width: 100%;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .btn {
                min-width: 100%;
                margin: 5px 0;
            }
            
            .btn-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                margin: 20px 0;
                padding: 0 5px;
                width: 100%;
                box-sizing: border-box;
            }
            
            .btn-grid-2 {
                grid-template-columns: 1fr;
                gap: 15px;
                margin-top: 25px;
                margin-bottom: 25px;
            }
            
            .btn-option {
                padding: 18px 12px;
                min-height: 90px;
                justify-content: center;
            }
            
            .option-icon {
                font-size: 1.6rem;
            }
            
            .option-text {
                font-size: 0.85rem;
                line-height: 1.2;
            }
            
            .nav-buttons {
                margin-top: 25px;
                gap: 10px;
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                width: 100%;
                box-sizing: border-box;
            }
            
            .nav-btn-prev, 
            .nav-btn-next {
                padding: 12px 15px;
                font-size: 0.95rem;
                min-width: 120px;
                width: 45%;
                max-width: 150px;
                box-sizing: border-box;
            }
            
            /* Contact form mobile fixes */
            .contact-form {
                max-width: 100% !important;
                padding: 0 10px;
            }
            
            .button-group {
                flex-direction: column !important;
                gap: 12px !important;
                margin-top: 20px !important;
            }
            
            .button-group .btn,
            .button-group .btn-secondary {
                width: 100% !important;
                margin: 0 !important;
                padding: 14px 20px !important;
                font-size: 1rem !important;
            }
            
            .form-input-full {
                padding: 14px 16px !important;
                font-size: 1rem !important;
            }
            
            /* Thank you page "You may also like" mobile fixes */
            #step6 .step-content > div:first-child > div:nth-child(4) {
                margin: 15px 0 !important;
                padding: 15px 10px !important;
            }
            
            #step6 .step-content > div:first-child > div:nth-child(4) > div:nth-child(2) {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 6px !important;
                margin-bottom: 10px !important;
            }
            
            #step6 .step-content > div:first-child > div:nth-child(4) > div:nth-child(2) > div {
                margin: 0 !important;
                max-width: none !important;
            }
            
            #step6 .step-content > div:first-child > div:nth-child(4) > div:nth-child(2) > div > div:first-child {
                height: 70px !important;
                font-size: 1.8rem !important;
            }
            
            #step6 .step-content > div:first-child > div:nth-child(4) > div:nth-child(2) > div > div:nth-child(2) {
                padding: 8px !important;
            }
            
            #step6 .step-content > div:first-child > div:nth-child(4) > div:nth-child(2) > div > div:nth-child(2) > h4 {
                font-size: 0.7rem !important;
                margin-bottom: 6px !important;
            }
            
            #step6 .step-content > div:first-child > div:nth-child(4) > div:nth-child(2) > div > div:nth-child(2) > button {
                width: 90px !important;
                height: 26px !important;
                font-size: 0.65rem !important;
                padding: 4px 8px !important;
            }
            
            /* Thank you page checkmark and title mobile */
            #step6 h1 {
                font-size: 2rem !important;
            }
            
            #step6 .step-content > div:first-child > div:first-child > div:first-child {
                width: 60px !important;
                height: 60px !important;
                margin-bottom: 10px !important;
            }
            
            #step6 .step-content > div:first-child > div:first-child > div:first-child > span {
                font-size: 2rem !important;
            }
            
            .footer {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .footer-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .btn-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- DEV NAV - REMOVE BEFORE PRODUCTION -->
    <div class="container">
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <button class="back-btn" id="backBtn" onclick="goBack()" style="display: none;">←</button>
                <div class="logo">
                    <div class="logo-icon">☀</div>
                    SolarFlow
                </div>
            </div>

            <!-- Enhanced Progress Section -->
            <div class="progress-section">
                <div class="progress-bar-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                        <div class="progress-percentage" id="progressPercentage">0%</div>
                    </div>
                </div>
                <div class="quotes-available">
                    <span>🎯</span>
                    <span>Smart Matching Active</span>
                </div>
            </div>
        
        
        
        <!-- Step 1: Discover your potential solar savings -->
        <div class="step active" id="step1">
            <div class="step-content">
                <h2>Discover your potential solar savings</h2>
                <p class="subtitle">Within minutes you could save <span class="highlight">up to 40%</span> with free, no-obligation estimates.</p>
                <p class="question-text">First: Do you own or rent?</p>
                
                <div class="btn-grid-2">
                    <div class="btn-option" onclick="selectOption('homeowner')">
                        <div class="option-icon">🏠</div>
                        <div class="option-text">Homeowner</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('renter')">
                        <div class="option-icon">🏢</div>
                        <div class="option-text">Renter</div>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button class="nav-btn-prev" onclick="window.location.href='index.html'">Previous</button>
                    <button class="nav-btn-next" onclick="nextStep()">Next</button>
                </div>
            </div>
        </div>

        <!-- Step 2: Home Type -->
        <div class="step" id="step2">
            <div class="step-content">
                <h2>What type of home do you live in?</h2>
                <p class="subtitle">Different home types have different solar potential.</p>
                
                <div class="btn-grid">
                    <div class="btn-option" onclick="selectOption('single-family')">
                        <div class="option-icon">🏠</div>
                        <div class="option-text">Single Family</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('multi-family')">
                        <div class="option-icon">🏘️</div>
                        <div class="option-text">Multi Family</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('townhome')">
                        <div class="option-icon">🏘️</div>
                        <div class="option-text">Townhome</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('apartment')" style="background: #f1f3f4;">
                        <div class="option-icon">🏢</div>
                        <div class="option-text">Apartment</div>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button class="nav-btn-prev" onclick="goBack()">Previous</button>
                    <button class="nav-btn-next" onclick="nextStep()">Next</button>
                </div>
            </div>
        </div>

        <!-- Step 3: Electricity Bill -->
        <div class="step" id="step3">
            <div class="step-content">
                <h2>What's your monthly electricity bill?</h2>
                <p class="subtitle">This helps us calculate your potential savings with solar.</p>
                
                <div class="btn-grid">
                    <div class="btn-option" onclick="selectOption('100-200')">
                        <div class="option-icon">💡</div>
                        <div class="option-text">$100 - $200</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('200-300')">
                        <div class="option-icon">💡</div>
                        <div class="option-text">$200 - $300</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('300-400')">
                        <div class="option-icon">💡</div>
                        <div class="option-text">$300 - $400</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('400+')">
                        <div class="option-icon">💡</div>
                        <div class="option-text">$400+</div>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button class="nav-btn-prev" onclick="goBack()">Previous</button>
                    <button class="nav-btn-next" onclick="nextStep()">Next</button>
                </div>
            </div>
        </div>

        <!-- Step 4: Roof Sunlight -->
        <div class="step" id="step4">
            <div class="step-content">
                <h2>How sunny is your roof?</h2>
                <p class="subtitle">This helps us to determine your annual solar savings.</p>
                
                <div class="btn-grid">
                    <div class="btn-option" onclick="selectOption('full-sunlight')">
                        <div class="option-icon">☀️</div>
                        <div class="option-text">Full Sunlight</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('partial-sunlight')">
                        <div class="option-icon">⛅</div>
                        <div class="option-text">Partial Sunlight</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('not-sure')">
                        <div class="option-icon">🤔</div>
                        <div class="option-text">I'm not sure</div>
                    </div>
                    <div class="btn-option" onclick="selectOption('mostly-shade')" style="background: #f1f3f4;">
                        <div class="option-icon">🌳</div>
                        <div class="option-text">Mostly Shade</div>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button class="nav-btn-prev" onclick="goBack()">Previous</button>
                    <button class="nav-btn-next" onclick="nextStep()">Next</button>
                </div>
            </div>
        </div>

        <!-- Step 5: Address & Contact Info -->
        <div class="step" id="step5">
            <div class="step-content">
                <h2>Who will receive the free solar estimate?</h2>
                <p class="subtitle">Your personalized offer is almost ready.</p>
                
                <div class="contact-form" style="max-width: 450px;">
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label for="address" class="input-label" style="margin-bottom: 5px; font-size: 0.85rem;">Home Address</label>
                        <input type="text" id="address" class="form-input-full" placeholder="Enter your home address" value="123 Solar Avenue, Beverly Hills, CA" style="padding: 12px 15px; font-size: 0.9rem; font-style: italic;">
                    </div>
                    
                    <div class="satellite-view" id="satelliteView" style="height: 120px; margin: 15px 0; font-size: 0.9rem;">
                        <div class="satellite-overlay">📍 Your roof image displayed here</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="firstName" class="input-label" style="margin-bottom: 5px; font-size: 0.85rem;">First Name</label>
                            <input type="text" id="firstName" class="form-input-full" placeholder="First name" value="Alex" style="padding: 12px 15px; font-size: 0.9rem; font-style: italic;">
                        </div>
                        
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="lastName" class="input-label" style="margin-bottom: 5px; font-size: 0.85rem;">Last Name</label>
                            <input type="text" id="lastName" class="form-input-full" placeholder="Last name" value="Johnson" style="padding: 12px 15px; font-size: 0.9rem; font-style: italic;">
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label for="email" class="input-label" style="margin-bottom: 5px; font-size: 0.85rem;">Email</label>
                        <input type="email" id="email" class="form-input-full" placeholder="Enter your email address" value="alex.johnson@email.com" style="padding: 12px 15px; font-size: 0.9rem; font-style: italic;">
                    </div>
                    
                    <div class="button-group" style="margin-top: 25px; display: flex; gap: 20px; justify-content: center; align-items: center;">
                        <button class="btn-secondary" onclick="goBack()" style="margin: 0;">Previous</button>
                        <button class="btn" onclick="nextStep()" style="margin: 0;">Get My Solar Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 6: Thank You -->
        <div class="step" id="step6">
            <div class="step-content">
                <div class="thank-you" style="padding: 10px 20px; max-width: 650px; margin: 0 auto; text-align: center;">
                    
                    <!-- Big Checkmark and Thank You -->
                    <div style="margin-bottom: 15px;">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #4CAF50, #45a049); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 12px; box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3); animation: checkPulse 1.5s ease-out;">
                            <span style="color: white; font-size: 2rem; font-weight: bold;">✓</span>
                        </div>
                        <h1 style="font-size: 2rem; font-weight: 800; color: #2d3748; margin: 0; line-height: 1.2;">Thank You!</h1>
                        <p style="font-size: 1rem; color: #718096; margin: 6px 0 0 0;">Your solar expert will call soon, Alex!</p>
                    </div>
                    
                    <!-- Call Notice -->
                    <div class="call-notice" style="padding: 10px 12px; margin: 15px 0; background: #e8f4fd; border: 1px solid #bee5ff; border-radius: 8px; display: flex; align-items: center; gap: 10px; text-align: left;">
                        <div style="color: #1976d2; font-size: 1.2rem;">📞</div>
                        <div style="font-size: 0.8rem; color: #1976d2; line-height: 1.3;">
                            <strong>Please don't miss the call!</strong> The expert won't be able to provide your free estimate if you miss it.
                        </div>
                    </div>
                    
                    <!-- What's Next - More Condensed -->
                    <div style="margin: 15px 0; text-align: left;">
                        <h3 style="font-size: 0.9rem; margin-bottom: 8px; color: #2d3748;">What's next?</h3>
                        <p style="font-size: 0.75rem; line-height: 1.3; color: #718096; margin-bottom: 12px;">
                            Your complete solar savings breakdown is ready! We've calculated your inputs and found the best installers in your area. 
                            <span style="font-weight: 600; color: #4CAF50;">No obligations - you're not tied to anything.</span>
                        </p>
                    </div>
                    
                    <!-- You may also like section - Back to Original Size -->
                    <div style="margin: 15px 0; background: #f8f9fa; padding: 12px 10px; border-radius: 12px; border: 1px solid #e9ecef;">
                        <h3 style="font-size: 1rem; margin-bottom: 15px; color: #333; text-align: left;">You may also like:</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 10px;">
                            <div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; display: flex; flex-direction: column;">
                                <div style="height: 50px; background: linear-gradient(135deg, #e3f2fd, #bbdefb); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">🏠</div>
                                <div style="padding: 10px; flex: 1; display: flex; flex-direction: column; align-items: center;">
                                    <h4 style="font-size: 0.75rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; line-height: 1.2; flex: 1; text-align: center;">Does your roof need repair?</h4>
                                    <button style="background: #4CAF50; color: white; border: none; padding: 6px 12px; border-radius: 15px; font-size: 0.7rem; font-weight: 600; cursor: pointer; width: 100px; height: 28px;" onclick="openRoofRepairLink()">Learn More</button>
                                </div>
                            </div>
                            
                            <div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; display: flex; flex-direction: column;">
                                <div style="height: 50px; background: linear-gradient(135deg, #e8f5e8, #c8e6c9); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">💰</div>
                                <div style="padding: 10px; flex: 1; display: flex; flex-direction: column; align-items: center;">
                                    <h4 style="font-size: 0.75rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; line-height: 1.2; flex: 1; text-align: center;">Need cash from home equity?</h4>
                                    <button style="background: #4CAF50; color: white; border: none; padding: 6px 12px; border-radius: 15px; font-size: 0.7rem; font-weight: 600; cursor: pointer; width: 100px; height: 28px;" onclick="openHomeEquityLink()">Learn More</button>
                                </div>
                            </div>
                            
                            <div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; display: flex; flex-direction: column;">
                                <div style="height: 50px; background: linear-gradient(135deg, #fff3e0, #ffcc80); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">🤝</div>
                                <div style="padding: 10px; flex: 1; display: flex; flex-direction: column; align-items: center;">
                                    <h4 style="font-size: 0.75rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; line-height: 1.2; flex: 1; text-align: center;">Interested in Debt Relief Programs?</h4>
                                    <button style="background: #4CAF50; color: white; border: none; padding: 6px 12px; border-radius: 15px; font-size: 0.7rem; font-weight: 600; cursor: pointer; width: 100px; height: 28px;" onclick="openDebtReliefLink()">Learn More</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 8px;">
                        <button class="btn" onclick="openLearnMore()" style="margin: 0 auto 10px auto; padding: 10px 20px; font-size: 0.85rem;">
                            Learn More About Solar Benefits
                        </button>
                        <br>
                    </div>
                </div>
            </div>
        </div>

        </div>

        <!-- Testimonials Section -->
        <div class="testimonials-section">
            <div class="testimonials-carousel">
                <button class="carousel-nav carousel-prev" onclick="moveCarousel(-1)">‹</button>
                <div class="testimonials-track" id="testimonialsTrack">
                    <!-- First set of testimonials -->
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">SOLARTECH</div>
                        <div class="testimonial-text">
                            "Everyone was prompt and helpful. They keep in contact regularly. They have accounting services that make sure I get the most credit when filing for taxes."
                        </div>
                        <div class="testimonial-author">Joseph Van Biber</div>
                        <div class="testimonial-location">Blue Springs, MO</div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">SUNPOWER+</div>
                        <div class="testimonial-text">
                            "SunPower+ is a good deal. They have good prices. They took care of everything so installation actually went very smoothly. I did have to install something but I looked it up on youtube for guidance."
                        </div>
                        <div class="testimonial-author">Derek</div>
                        <div class="testimonial-location">Centerville, UT</div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">APEX SOLAR</div>
                        <div class="testimonial-text">
                            "Good communication. Quick response, good service, very professional. Also, like the apps, telling the energy usage and produced from each solar panel."
                        </div>
                        <div class="testimonial-author">Chan Kung</div>
                        <div class="testimonial-location">Cleveland, OH</div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">SOLARVISION</div>
                        <div class="testimonial-text">
                            "We've got a great rep that keeps us informed of what's going on. Installing the panels went as smooth as it could be. We're looking forward to getting the battery packs with it."
                        </div>
                        <div class="testimonial-author">Glenn</div>
                        <div class="testimonial-location">Winthrop Harbor, IL</div>
                    </div>
                    
                    <!-- Duplicate set for infinite scrolling -->
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">SOLARTECH</div>
                        <div class="testimonial-text">
                            "Everyone was prompt and helpful. They keep in contact regularly. They have accounting services that make sure I get the most credit when filing for taxes."
                        </div>
                        <div class="testimonial-author">Joseph Van Biber</div>
                        <div class="testimonial-location">Blue Springs, MO</div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">SUNPOWER+</div>
                        <div class="testimonial-text">
                            "SunPower+ is a good deal. They have good prices. They took care of everything so installation actually went very smoothly. I did have to install something but I looked it up on youtube for guidance."
                        </div>
                        <div class="testimonial-author">Derek</div>
                        <div class="testimonial-location">Centerville, UT</div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">APEX SOLAR</div>
                        <div class="testimonial-text">
                            "Good communication. Quick response, good service, very professional. Also, like the apps, telling the energy usage and produced from each solar panel."
                        </div>
                        <div class="testimonial-author">Chan Kung</div>
                        <div class="testimonial-location">Cleveland, OH</div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="stars">⭐⭐⭐⭐⭐</div>
                        <div class="company-logo">SOLARVISION</div>
                        <div class="testimonial-text">
                            "We've got a great rep that keeps us informed of what's going on. Installing the panels went as smooth as it could be. We're looking forward to getting the battery packs with it."
                        </div>
                        <div class="testimonial-author">Glenn</div>
                        <div class="testimonial-location">Winthrop Harbor, IL</div>
                    </div>
                </div>
                <button class="carousel-nav carousel-next" onclick="moveCarousel(1)">›</button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-left">
                <div class="footer-logo">
                    <div class="footer-logo-icon">☀</div>
                    SolarFlow
                </div>
                <div class="copyright">© 2025 SolarFlow.us All rights reserved</div>
            </div>
            <div class="footer-links">
                <a href="#privacy">Privacy Policy</a>
                <a href="#terms">Terms of Use</a>
                <a href="#contact">Contact Us</a>
                <a href="#ccpa">CCPA</a>
                <a href="#privacy">Do Not Sell My Details</a>
            </div>
        </div>
    </div>

    <!-- Disqualification Overlay -->
    <div class="disqualification-overlay" id="disqualificationOverlay">
        <div class="disqualification-modal">
            <div class="modal-header">
                <button class="modal-close" onclick="closeDisqualificationModal()">×</button>
                <h3 class="modal-title" id="modalTitle">We Found Great Alternatives!</h3>
                <p class="modal-subtitle" id="modalSubtitle">While solar panels might not be the perfect fit, we have other excellent energy solutions for you.</p>
            </div>
            
            <div class="modal-content">
                <div class="alternative-offers" id="alternativeOffers">
                    <!-- Offers will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="modal-footer" style="display: none;">
                <button class="modal-continue-btn" onclick="openLearnMore()">Learn More About Solar Benefits</button>
                <button class="modal-close-btn" onclick="closeDisqualificationModal()">Maybe Later</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;
        const formData = {};

        function updateProgress() {
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
            const roundedProgress = Math.round(progress);
            const progressFill = document.getElementById('progressFill');
            const progressPercentage = document.getElementById('progressPercentage');
            
            // Update progress bar width
            progressFill.style.width = progress + '%';
            
            // Update percentage text
            progressPercentage.textContent = roundedProgress + '%';
            
            // Always show pill when there's progress, position it correctly
            if (progress === 0) {
                progressPercentage.style.opacity = '0';
                progressPercentage.style.left = '0%'; // Start at beginning
            } else {
                progressPercentage.style.opacity = '1';
                // Position pill at the end of the progress bar, but ensure it starts from 0%
                // For very low progress, keep it visible by using a minimum position
                let percentagePosition;
                if (progress < 8) {
                    // For low progress, position at a minimum viable location
                    percentagePosition = Math.max(progress, 3);
                } else {
                    // For normal progress, position at the exact end
                    percentagePosition = progress;
                }
                progressPercentage.style.left = percentagePosition + '%';
            }
            
            // Show/hide progress bar based on current step
            const progressSection = document.querySelector('.progress-section');
            if (currentStep === 1) {
                progressSection.classList.remove('show');
            } else {
                progressSection.classList.add('show');
            }
            
            // Show/hide back button and set correct functionality
            const backBtn = document.getElementById('backBtn');
            if (currentStep > 1) {
                if (backBtn) {
                    backBtn.style.display = 'block';
                    backBtn.onclick = goBack;
                }
            } else {
                if (backBtn) {
                    backBtn.style.display = 'block';
                    backBtn.onclick = function() { window.location.href = 'index.html'; };
                }
            }

            // Restore previous selections when navigating back
            restorePreviousSelection();
            
            console.log(`PROGRESS UPDATE: Now on step ${currentStep}`);
        }

        function restorePreviousSelection() {
            const stepData = formData['step' + currentStep];
            if (stepData) {
                console.log(`Restoring selection for step ${currentStep}: ${stepData}`);
                const options = document.querySelectorAll('#step' + currentStep + ' .btn-option');
                options.forEach(option => {
                    option.classList.remove('selected');
                    // Check if this option matches the stored selection by looking at the onclick attribute
                    const onclickStr = option.getAttribute('onclick');
                    if (onclickStr && onclickStr.includes(`'${stepData}'`)) {
                        option.classList.add('selected');
                        
                        // Highlight effect to show restored selection
                        option.style.transition = 'all 0.5s ease';
                        option.style.transform = 'translateY(-3px)';
                        option.style.boxShadow = '0 8px 25px rgba(76, 175, 80, 0.25)';
                    }
                });
            }
        }

        function nextStep() {
            console.log('nextStep called (manual button click)');
            
            // Validation for specific steps
            if (currentStep === 5) {  // Contact info step (was step 6, now step 5)
                const address = document.getElementById('address').value;
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const email = document.getElementById('email').value;
                
                if (!address.trim()) {
                    alert('Please enter your address.');
                    return;
                }
                
                if (!firstName.trim() || !lastName.trim() || !email.trim()) {
                    alert('Please fill in all contact information.');
                    return;
                }
                
                formData.address = address;
                formData.firstName = firstName;
                formData.lastName = lastName;
                formData.email = email;
                
                // Simulate satellite image loading
                document.getElementById('satelliteView').innerHTML = '<div class="satellite-overlay">🛰️ Loading satellite view of ' + address + '...</div>';
                setTimeout(() => {
                    document.getElementById('satelliteView').innerHTML = '<div class="satellite-overlay">📍 Your satellite image of your roof<br><em>Location confirmed</em></div>';
                }, 1500);
                
                console.log('Form Data Collected:', formData);
            }
            
            // Save previous step for logging
            const prevStep = currentStep;

            // Only proceed if not at the last step
            if (currentStep < totalSteps) {
                // Hide current step
                document.getElementById('step' + currentStep).classList.remove('active');
                
                // Move to next step
                currentStep++;
                
                // Show new step
                document.getElementById('step' + currentStep).classList.add('active');
                
                // Update progress bar
                updateProgress();
                
                console.log(`MANUAL NAVIGATION: Moved from step ${prevStep} to step ${currentStep}`);
            }
        }

        function selectOption(option) {
            console.log('selectOption called with:', option);
            
            // Get the current active step element
            const currentStepElem = document.querySelector('.step.active');
            const currentStepId = currentStepElem.id;
            
            console.log(`Currently on step element: ${currentStepId}`);
            
            // Visual feedback for selection
            const options = document.querySelectorAll(`#${currentStepId} .btn-option`);
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Find and mark the selected option
            let selectedOption = null;
            options.forEach(opt => {
                const onclickAttr = opt.getAttribute('onclick');
                if (onclickAttr && onclickAttr.includes(`'${option}'`)) {
                    selectedOption = opt;
                    opt.classList.add('selected');
                }
            });
            
            // Store selection in form data
            formData[currentStepId] = option;
            console.log(`Selection saved: ${option} for ${currentStepId}`);
            
            // Check for disqualification for apartment or mostly-shade options
            if ((option === 'apartment' || option === 'mostly-shade') && checkDisqualification(option)) {
                console.log('Disqualification modal triggered for:', option);
                return; // Don't advance to next step if disqualified
            }
            
            // Determine the next step element ID based on current ID
            let nextStepId;
            if (currentStepId === 'step1') {
                nextStepId = 'step2'; // Always go to step 2 from step 1
            } else if (currentStepId === 'step2') {
                nextStepId = 'step3';
            } else if (currentStepId === 'step3') {
                nextStepId = 'step4';
            } else if (currentStepId === 'step4') {
                nextStepId = 'step5';
            } else if (currentStepId === 'step5') {
                nextStepId = 'step6';
            }
            
            console.log(`Next step will be: ${nextStepId}`);
            
            // Navigate with timeout for visual feedback
            setTimeout(() => {
                // Hide current step
                currentStepElem.classList.remove('active');
                
                // Show next step
                const nextStepElem = document.getElementById(nextStepId);
                if (nextStepElem) {
                    nextStepElem.classList.add('active');
                    console.log(`Activated step: ${nextStepId}`);
                    
                    // Update currentStep variable to match ID
                    currentStep = parseInt(nextStepId.replace('step', ''));
                    console.log(`Set currentStep variable to: ${currentStep}`);
                    
                    // Update progress
                    updateProgress();
                } else {
                    console.error(`Could not find next step element: ${nextStepId}`);
                }
            }, 250);
        }

        function goBack() {
            if (currentStep > 1) {
                document.getElementById('step' + currentStep).classList.remove('active');
                currentStep--;
                document.getElementById('step' + currentStep).classList.add('active');
                updateProgress();
            }
        }

        // Initialize with event listeners for all option buttons
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Adding click handlers to all option buttons');
            
            // Add click handlers to all option buttons
            document.querySelectorAll('.btn-option').forEach(button => {
                button.addEventListener('click', function(e) {
                    // Extract the option value from the onclick attribute
                    const onclickAttr = this.getAttribute('onclick');
                    if (onclickAttr) {
                        const optionMatch = onclickAttr.match(/selectOption\('(.+?)'\)/);
                        if (optionMatch && optionMatch[1]) {
                            const option = optionMatch[1];
                            console.log('Option clicked:', option);
                            selectOption(option);
                        }
                    }
                });
            });
            
            // Initialize progress bar
            updateProgress();
            
            // Check for immediate popup display on page load
            const urlParams = new URLSearchParams(window.location.search);
            const showPopup = urlParams.get('showPopup');
            const autoSelect = urlParams.get('autoSelect');
            
            // If showPopup=true, show the disqualification modal immediately
            if (showPopup === 'true' && autoSelect === 'mostly-shade') {
                console.log('Showing popup immediately on page load');
                
                // Set form data
                formData['step4'] = 'mostly-shade';
                
                // Show the disqualification modal immediately
                setTimeout(() => {
                    if (checkForDisqualification('mostly-shade')) {
                        console.log('Disqualification popup shown immediately');
                    }
                }, 1); // Almost instant - just 1ms delay for DOM readiness
            }
        });

        // Check for direct step navigation via URL hash or parameter
        function checkDirectNavigation() {
            console.log('Checking hash:', window.location.hash);
            console.log('Checking URL params:', window.location.search);
            
            const urlParams = new URLSearchParams(window.location.search);
            const stepParam = urlParams.get('step');
            const autoSelect = urlParams.get('autoSelect');
            const showPopup = urlParams.get('showPopup');
            
            if (window.location.hash === '#step6' || stepParam === '6') {
                console.log('Navigating to step 6');
                // Hide current step
                document.getElementById('step' + currentStep).classList.remove('active');
                // Jump to step 6
                currentStep = 6;
                document.getElementById('step6').classList.add('active');
                updateProgress();
                console.log('Navigation complete, currentStep:', currentStep);
            } else if (stepParam) {
                // Navigate to specified step
                const targetStep = parseInt(stepParam);
                if (targetStep >= 1 && targetStep <= totalSteps) {
                    console.log('Navigating to step', targetStep);
                    document.getElementById('step' + currentStep).classList.remove('active');
                    currentStep = targetStep;
                    document.getElementById('step' + currentStep).classList.add('active');
                    updateProgress();
                    console.log('Navigation complete, currentStep:', currentStep);
                    
                    // Handle auto-selection (but not popup if showPopup=true, that's handled above)
                    if (autoSelect && currentStep === 4 && showPopup !== 'true') {
                        console.log('Auto-selecting:', autoSelect);
                        if (autoSelect === 'mostly-shade') {
                            formData['step4'] = 'mostly-shade';
                            
                            const mostlyShadeButton = document.querySelector('[onclick*="mostly-shade"]');
                            if (mostlyShadeButton) {
                                const options = document.querySelectorAll('#step4 .btn-option');
                                options.forEach(opt => opt.classList.remove('selected'));
                                mostlyShadeButton.classList.add('selected');
                            }
                            
                            setTimeout(() => {
                                if (checkDisqualification('mostly-shade')) {
                                    console.log('Disqualification modal triggered for mostly-shade');
                                }
                            }, 50);
                        }
                    }
                }
            }
        }

        // Run immediately and also on hash change
        checkDirectNavigation();
        window.addEventListener('hashchange', checkDirectNavigation);

        // Hide dev nav if requested (for embedded use)
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('hideDevNav') === 'true') {
            const devNav = document.querySelector('.dev-nav');
            if (devNav) {
                devNav.style.display = 'none';
            }
            // Remove body padding when dev nav is hidden
            document.body.style.paddingTop = '0';
            console.log('Dev navigation hidden for embedded view');
        }

        // Auto-redirect function for thank you page
        function openLearnMore() {
            window.open('https://www.nation.com/how-solar-energy-reduces-costs-and-boosts-home-value-en-us/', '_blank');
        }

        // Redirect functions for different services
        function openRoofRepairLink() {
            window.open('https://www.nation.com/how-to-find-the-best-roof-replacement-deals-and-quotes-en-us/', '_blank');
        }

        function openHomeEquityLink() {
            window.open('https://www.nation.com/heloc-basics-a-homeowners-guide-to-leveraging-equity-en-us/', '_blank');
        }

        function openDebtReliefLink() {
            window.open('https://www.nation.com/how-to-navigate-debt-relief-solutions-en-us/', '_blank');
        }

        // Disqualification modal redirect functions
        function openPersonalLoanLink() {
            window.open('https://www.nation.com/personal-loans-compare-rates-and-get-the-best-deal-en-us/', '_blank');
        }

        function openInternetPlansLink() {
            window.open('https://www.nation.com/affordable-internet-options-for-apartment-dwellers-en-us/', '_blank');
        }

        function openTreeTrimmingLink() {
            window.open('https://www.nation.com/find-affordable-tree-cutting-services-en-us/', '_blank');
        }

        function openHomeFinancingLink() {
            window.open('https://www.nation.com/heloc-basics-a-homeowners-guide-to-leveraging-equity-en-us/', '_blank');
        }

        // Testimonial Carousel
        let currentTestimonial = 0;
        const testimonialCards = document.querySelectorAll('.testimonial-card');
        const totalTestimonials = testimonialCards.length / 2; // We have duplicates, so divide by 2
        const cardWidth = 236; // 220px + 16px margin

        function moveCarousel(direction) {
            const track = document.getElementById('testimonialsTrack');
            
            currentTestimonial += direction;
            
            // Move the track
            track.style.transform = `translateX(-${currentTestimonial * cardWidth}px)`;
            
            // Handle infinite scrolling by resetting position when needed
            if (currentTestimonial >= totalTestimonials) {
                setTimeout(() => {
                    track.style.transition = 'none';
                    currentTestimonial = 0;
                    track.style.transform = `translateX(0px)`;
                    setTimeout(() => {
                        track.style.transition = 'transform 0.5s ease';
                    }, 50);
                }, 500);
            } else if (currentTestimonial < 0) {
                setTimeout(() => {
                    track.style.transition = 'none';
                    currentTestimonial = totalTestimonials - 1;
                    track.style.transform = `translateX(-${currentTestimonial * cardWidth}px)`;
                    setTimeout(() => {
                        track.style.transition = 'transform 0.5s ease';
                    }, 50);
                }, 500);
            }
        }

        // Auto-rotate testimonials
        setInterval(() => {
            moveCarousel(1);
        }, 5000);

        // Handle Enter key for input fields
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (currentStep === 1 || currentStep === 6) {
                    nextStep();
                }
            }
        });

        // Disqualification Logic
        const disqualifyingOptions = {
            'apartment': 'apartment',
            'mostly-shade': 'shaded'
        };

        const alternativeOffers = {
            apartment: [
                {
                    icon: '💳',
                    title: 'Personal Loan Options',
                    description: 'You could explore personal loan offers for home improvements, moving expenses, or other financial needs.',
                    features: ['Learn about approval process', 'Compare available rates', 'Explore flexible terms']
                },
                {
                    icon: '🌐',
                    title: 'Internet Plans',
                    description: 'You could learn how to save on high-speed internet plans perfect for apartments and rental properties.',
                    features: ['Explore installation options', 'Discover savings opportunities', 'Learn about bundle options']
                }
            ],
            shaded: [
                {
                    icon: '🌳',
                    title: 'Tree Trimming Service',
                    description: 'Interested in getting a quote for tree trimming? Discover options available.',
                    features: ['Tree trimming & removal info', 'Property maintenance tips', 'Connect with local professionals']
                },
                {
                    icon: '🏡',
                    title: 'Home Financing',
                    description: 'You could explore Home Equity Line of Credit options to finance property improvements.',
                    features: ['Learn about interest rates', 'Explore access to funds', 'Understand tax advantages']
                }
            ]
        };

        function checkDisqualification(selectedValue) {
            const disqualificationType = disqualifyingOptions[selectedValue];
            if (disqualificationType) {
                if (disqualificationType === 'no-offers') {
                    // For renters, show a simple message without offers
                    showNoOffersModal();
                } else {
                    showDisqualificationModal(disqualificationType);
                }
                return true;
            }
            return false;
        }

        function showNoOffersModal() {
            const overlay = document.getElementById('disqualificationOverlay');
            const modalTitle = document.getElementById('modalTitle');
            const modalSubtitle = document.getElementById('modalSubtitle');
            const offersContainer = document.getElementById('alternativeOffers');
            
            // Update content for renters
            modalTitle.textContent = 'Thanks for Your Interest!';
            modalSubtitle.textContent = 'Solar installations typically require property ownership. However, you may want to discuss solar options with your landlord or consider solar when you own a home in the future.';
            
            // Clear offers container
            offersContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #718096;">Contact us when you become a homeowner and we\'ll help you go solar!</div>';
            
            // Show modal
            overlay.classList.add('show');
            document.body.classList.add('modal-active');
            document.body.style.overflow = 'hidden';
        }

        function showDisqualificationModal(offerType) {
            const overlay = document.getElementById('disqualificationOverlay');
            const modalTitle = document.getElementById('modalTitle');
            const modalSubtitle = document.getElementById('modalSubtitle');
            const offersContainer = document.getElementById('alternativeOffers');
            
            // Reset modal content to default
            modalTitle.textContent = 'We Found Great Alternatives!';
            modalSubtitle.textContent = 'While solar panels might not be the perfect fit, we have other excellent energy solutions for you.';
            
            // Clear previous offers
            offersContainer.innerHTML = '';
            
            // Get offers for this type
            const offers = alternativeOffers[offerType] || [];
            
            // Create offer cards
            offers.forEach(offer => {
                const offerCard = document.createElement('div');
                offerCard.className = 'offer-card';
                
                offerCard.innerHTML = `
                    <div class="offer-header">
                        <div class="offer-icon">${offer.icon}</div>
                        <h4 class="offer-title">${offer.title}</h4>
                    </div>
                    <p class="offer-description">${offer.description}</p>
                    <ul class="offer-features">
                        ${offer.features.slice(0, 3).map(feature => `<li>${feature}</li>`).join('')}
                    </ul>
                    <button class="learn-more-btn" onclick="selectOffer('${offer.title}')">Learn More</button>
                `;
                
                offersContainer.appendChild(offerCard);
            });
            
            // Show modal
            overlay.classList.add('show');
            document.body.classList.add('modal-active');
            document.body.style.overflow = 'hidden';
        }

        function closeDisqualificationModal() {
            const overlay = document.getElementById('disqualificationOverlay');
            overlay.classList.remove('show');
            document.body.classList.remove('modal-active');
            document.body.style.overflow = 'auto';
            
            // Deselect the previously selected option
            document.querySelectorAll('.btn-option').forEach(option => {
                option.classList.remove('selected');
            });
        }

        function selectOffer(offerTitle) {
            console.log('Selected offer:', offerTitle);
            closeDisqualificationModal();
            
            // Redirect to appropriate URL based on offer title
            switch(offerTitle) {
                case 'Personal Loan Options':
                    openPersonalLoanLink();
                    break;
                case 'Internet Plans':
                    openInternetPlansLink();
                    break;
                case 'Tree Trimming Service':
                    openTreeTrimmingLink();
                    break;
                case 'Home Financing':
                    openHomeFinancingLink();
                    break;
                default:
                    alert(`Great choice! We'll connect you with ${offerTitle} providers.`);
            }
        }

        function continueWithExpert() {
            console.log('User requested expert consultation');
            closeDisqualificationModal();
            alert('Thanks! A solar expert will contact you within 24 hours to discuss custom solutions.');
        }

        // Auto-click functionality for disqualifying offer demo
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const autoSelect = urlParams.get('autoSelect');
            const showPopup = urlParams.get('showPopup');
            
            if (autoSelect && showPopup) {
                console.log('Auto-selecting option:', autoSelect);
                
                // Wait for page to fully load
                setTimeout(() => {
                    // Find the div with onclick="selectOption('mostly-shade')"
                    const optionDiv = document.querySelector(`div[onclick="selectOption('${autoSelect}')"]`);
                    if (optionDiv) {
                        // Add minimal delay before clicking
                        setTimeout(() => {
                            optionDiv.click();
                            console.log('Auto-clicked option div:', autoSelect, '- popup should show');
                        }, 50);
                    } else {
                        console.log('Could not find option div for:', autoSelect);
                        // Debug: log all available options
                        const allOptions = document.querySelectorAll('div[onclick*="selectOption"]');
                        console.log('Available options:', Array.from(allOptions).map(el => el.getAttribute('onclick')));
                    }
                }, 1000);
            }
        });

        // Close modal when clicking outside
        document.getElementById('disqualificationOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDisqualificationModal();
            }
        });
    </script>
</body>
</html>